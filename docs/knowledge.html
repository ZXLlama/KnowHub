<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Knowledge | KnowHub</title>

    <meta name="theme-color" content="#0b1220" />

    <link rel="stylesheet" href="./assets/css/template.css" />
    <link rel="stylesheet" href="./assets/css/knowledge.css" />

    <!-- 句子自動縮排：內文段落沒有「：」就縮排 -->
    <style>.prose p.indent-1{ text-indent: 2em; }</style>

    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
      onload="renderMathInElement(document.body,{delimiters:[{left:'$$',right:'$$',display:true},{left:'$',right:'$',display:false},{left:'\\(',right:'\\)',display:false},{left:'\\[',right:'\\]',display:true}],throwOnError:false});">
    </script>
  </head>
  <body class="kh-body">
    <header class="kh-header">
      <div class="kh-header__inner">
        <a class="kh-logo" href="./index.html" aria-label="回到首頁">
          <img src="./images/Know-hub.png" alt="KnowHub Logo" />
        </a>
      </div>
    </header>

    <div class="kh-shell">
      <aside class="kh-sidenav" data-open="true" aria-label="類別側邊欄">
        

        <label class="kh-side-search" for="side-search">
          <span class="icon" aria-hidden="true">🔎</span>
          <input id="side-search" type="search" placeholder="搜尋標題…" autocomplete="off" />
        </label>

        <section class="kh-random-filter" aria-label="隨機科目來源">
          <h3>隨機來源科目</h3>
          <div id="random-subjects" class="kh-subject-checks"></div>
          <p class="hint">✓ 勾選的科目會用於「🎲 隨機」；手動從清單點標題不受影響。</p>
        </section>

        <nav id="nav-tree" class="kh-tree" aria-label="知識清單"></nav>
      </aside>

      <main class="kh-content" id="kh-content" aria-live="polite" aria-label="內容">
        <div class="kh-toolbar">
          <button id="btn-random" class="btn btn-primary" type="button">🎲 隨機</button>
          <span class="kh-toolbar__spacer"></span>
        </div>

        <div id="knowledge-card" class="kh-card-host"></div>

        <div class="kh-bottom-home">
          <a class="kh-home-btn btn" href="./index.html" aria-label="回到首頁">🏠 回首頁</a>
        </div>
      </main>
    </div>

    <footer class="kh-footer">
      <div class="kh-footer__inner">
        <small>© <span id="year"></span> KnowHub — Keep learning, keep earning 💸</small>
      </div>
    </footer>

    <script>
      window.KNOWHUB = window.KNOWHUB || {};
      window.KNOWHUB.CSV_INDEX = "./assets/data/notes.csv";
      window.KNOWHUB.SUBJECTS  = ["國文","英文","數學","物理","化學","生物","地球科學"];
      document.addEventListener('DOMContentLoaded', ()=> {
        const y=document.getElementById('year'); if (y) y.textContent=new Date().getFullYear();
      });
    </script>

    <!-- 純 CSV 版主程式，帶 cache-busting 參數 -->
    <script src="./assets/js/knowledge.js?v=20251011-csv" defer></script>
    <!-- 保險：1.2s 後若有殘留 loader（舊版遺留），移除掉 -->
    <script>setTimeout(()=>{ document.querySelector('.kh-loader')?.remove(); }, 1200);</script>
  </body>
</html>
