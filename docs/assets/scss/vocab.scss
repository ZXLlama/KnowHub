/* ======= Importsï¼šæ²¿ç”¨ä½ çš„å…±ç”¨æ¨£å¼ ======= */
@use "./background" as *;
@use "./buttons" as *;

/* ======= Rootï¼šå°ºå¯¸èˆ‡å­—ç´š ======= */
:root{
  /* ç‰ˆå¿ƒ */
  --kh-max-w: 760px;

  /* å¡ç‰‡ï¼šé è¨­èµ°ã€Œè¡Œå‹•ç‰ˆ**å¯«æ­»**å°ºå¯¸ã€ */
  --card-w: 360px;
  --card-h: 440px;

  /* å›ºå®šä¸‰è¡Œæ‰€å çš„å‚ç›´æ¯”ä¾‹ï¼ˆç¸½å’Œ=100%ï¼‰ */
  --fs-pos: clamp(12px, 2.2vmin, 18px);   /* è©æ€§ï¼šæœ€å° */
  --fs-zh:  clamp(16px, 3.2vmin, 28px);   /* ä¸­æ–‡ï¼šä¸­ç­‰ */
  --fs-en:  clamp(22px, 6.0vmin, 56px);   /* è‹±æ–‡ï¼šæœ€å¤§ */

  /* æ¯å€‹å€å¡Šå…è¨±çš„è¡Œæ•¸ï¼Œé¿å…æ–‡å­—æŠŠç‰ˆä½æ’é–‹ */
  --lines-pos: 1;
  --lines-en:  2;
  --lines-zh:  2;

  /* å¡ç‰‡å¯¬é«˜æ¯”ï¼Œç¢ºä¿é«˜åº¦ç©©å®šï¼ˆå¯ä¾å–œå¥½å¾®èª¿ï¼‰ */
  --card-aspect: 3/4;

  --card-radius: 18px;
  --card-pad: 22px;

  --kh-pad-x: clamp(12px, 4vw, 20px);
  --kh-gap: clamp(12px, 3.6vw, 16px);

  --card-shadow: 0 10px 30px rgba(0,0,0,.45);
  --card-border: 1px solid rgba(255,255,255,.08);
}

/* ======= åŸºç¤å¸ƒå±€ ======= */
* { box-sizing: border-box; }
html, body { width: 100%; max-width: 100%; }
.vocab-body { overflow-x: hidden; }
.kh-main { min-height: 100svh; } /* è®“æ¡Œæ©Ÿè¦–è¦ºåƒæ»¿è¦–çª—é«˜åº¦ */

.vocab-container{
  width: 100%;
  max-width: var(--kh-max-w);
  margin-inline: auto;
  padding: calc(var(--kh-gap) + 4px) var(--kh-pad-x) var(--kh-gap);
  display: grid;
  gap: var(--kh-gap);
  justify-items: center;
}

/* ======= æœå°‹ ======= */
.search-wrap{
  width: 100%;
  display: grid;
  gap: 8px;

  #search{
    width: 100%;
    height: 44px;
    border-radius: 999px;
    padding: 0 16px;
    outline: none;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: #fff;
    backdrop-filter: blur(6px);
  }

  .suggestions{
    width: 100%;
    max-height: 40vh;
    overflow: auto;
    list-style: none;
    margin: 0;
    padding: 6px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.08);
    background: rgba(0,0,0,.35);
    display: none;

    &.show { display: block; }
    li{
      padding: 10px 12px;
      border-radius: 8px;
      cursor: pointer;
      &:hover { background: rgba(255,255,255,.06); }
    }
  }
}

/* ======= å–®å­—å¡ ======= */
.flip-card{ width: 100%; display: grid; justify-items: center; aspect-ratio: var(--card-aspect);}

.card{
  position: relative;
  width: var(--card-w);       /* å¯«æ­»å¯¬åº¦ */
  height: var(--card-h);      /* å¯«æ­»é«˜åº¦ */
  padding: var(--card-pad);
  border-radius: var(--card-radius);
  border: var(--card-border);
  overflow: hidden;
  display: grid;
  place-items: center;
  background:
    radial-gradient(120% 100% at 0% 0%, rgba(98,0,255,.18), transparent 60%),
    radial-gradient(120% 100% at 100% 0%, rgba(0,200,255,.15), transparent 60%),
    rgba(20,20,24,.85);
  box-shadow: var(--card-shadow);
}

/* è§’æ¨™èˆ‡ç™¼éŸ³ */
.corner-index{
  position: absolute; top: 10px; left: 12px;
  font-size: 12px; opacity: .8; user-select: none;
}
.btn-tts{
  position: absolute; top: 8px; right: 10px;
  width: 30px; height: 30px; border-radius: 999px;
  display: grid; place-items: center; line-height: 1; font-size: 16px; padding: 0;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.18);
  transition: transform .12s ease, background .2s ease;
  &:hover { transform: translateY(-1px) scale(1.03); background: rgba(255,255,255,.12); }
}

/* é¢å…§å®¹ */
.face{
  width: 100%;
  height: 100%;
  display: grid; place-items: center;
  gap: 0px; padding-inline: 6px;
  overflow-y: auto; overflow-x: hidden;
}
.face-hidden{ display: none !important; }  /* â† é›™é¢åˆ‡æ›é—œéµ */

.word-text{
  font-size: var(--fz-word);
  font-weight: 800;
  line-height: 1.08;
  text-wrap: balance;
  word-break: break-word;
  letter-spacing: .02em;
  margin: 0;
}
.pos-text{
  font-size: var(--fz-pos);
  opacity: .8;
  margin: 0;
}
.definition-text{
  font-size: var(--fz-def);
  line-height: 1.6;
  margin: 0;
  text-align: left;
  word-break: break-word;
  white-space: pre-wrap;
}

/* ======= æŒ‰éˆ•ç¾¤ ======= */
.btn-group{
  width: 100%;
  display: grid;
  gap: var(--kh-gap);
  justify-items: center;

  .row-btns{
    width: 100%;
    display: grid;
    grid-template-columns: 52px 1fr 52px; /* â¬…ï¸ ğŸ² â¡ï¸ */
    gap: var(--kh-gap);
    align-items: center;
  }

  .btn{ width: 100%; }
  .btn-nav{ min-width: 52px; height: 48px; padding: 0; border-radius: 999px; font-size: 18px; }
  .btn-wide, .btn-mode, .btn-home{ height: 48px; border-radius: 16px; font-weight: 700; }
}

/* ======= Headerï¼ˆä¸€è‡´å¤–è§€ï¼‰ ======= */
.kh-header{
  position: sticky; top: 0; z-index: 50;
  backdrop-filter: blur(8px);
  background: linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,0));
  .kh-header__inner{
    max-width: min(960px, 94vw);
    margin-inline: auto;
    padding: 12px var(--kh-pad-x);
    display: grid; justify-items: center;
  }
  .kh-logo img{ height: 36px; display: block; }
}

/* ======= RWDï¼šè¶…å°æ‰‹æ©Ÿ ======= */
@media (max-width: 360px){
  :root{
    --card-w: 320px;
    --card-h: 420px;
    --fz-word: clamp(22px, 8.2vw, 36px);
  }
}

/* ======= RWDï¼šæ¡Œæ©Ÿåƒæ»¿è¦–çª— ======= */
@media (min-width: 1024px){
  :root{
    --kh-max-w: 1120px;
    --card-w: 560px;
    --card-h: 760px;
    --fz-word: clamp(32px, 5vw, 72px);
    --fz-pos:  clamp(14px, 1.6vw, 22px);
    --fz-def:  clamp(16px, 1.8vw, 22px);
  }
  .vocab-container{
    max-width: var(--kh-max-w);
    width: min(96vw, var(--kh-max-w));
    padding-left: clamp(16px, 2vw, 32px);
    padding-right: clamp(16px, 2vw, 32px);
  }
  .btn-group .row-btns{ grid-template-columns: 64px 1fr 64px; }
  .btn-tts{ width: 34px; height: 34px; }
}

/* ======= RWDï¼šè¶…å¤§æ¡Œæ©Ÿï¼ˆå¯é¸ï¼‰ ======= */
@media (min-width: 1440px){
  :root{ --kh-max-w: 1280px; --card-w: 620px; --card-h: 860px; }
}

/* ç´°ç¯€ */
::placeholder{ color: rgba(255,255,255,.6); }

/* ================== è¦†è“‹ï¼šå¡ç‰‡å¯¬åº¦å°é½ŠæŒ‰éˆ• + Footer è²¼åº• ================== */

/* 1) å…¨é çµæ§‹ï¼šFooter æ°¸é åœ¨åº•éƒ¨ */
.kh-body{
  min-height: 100svh;          /* æ»¿è¦–çª—é«˜ */
  display: flex;
  flex-direction: column;
}
.kh-main{ flex: 1; }           /* ä¸»å…§å®¹æ’é–‹å‰©é¤˜ç©ºé–“ */
.kh-footer{ margin-top: auto; }/* è®“ footer è²¼åˆ°åº•éƒ¨ */

/* 2) å…§å®¹å¯¬åº¦é–å®šï¼šå¡ç‰‡ = æŒ‰éˆ•ç¾¤ï¼ˆä¹Ÿå¯é †ä¾¿è®“æœå°‹åˆ—åŒå¯¬ï¼‰ */
:root{
  /* ç”¨ content å¯¬åº¦è®Šæ•¸ï¼Œé è¨­å°±åƒå¡ç‰‡å›ºå®šå¯¬ */
  --content-w: var(--card-w);
}

/* å¡ç‰‡/æŒ‰éˆ•/æœå°‹ éƒ½ä»¥åŒä¸€å€‹å¯¬åº¦å‘ˆç¾ï¼ˆç½®ä¸­ï¼‰ */
.vocab-container{ justify-items: center; }

.flip-card,
.btn-group,
.search-wrap{
  width: var(--content-w);
  max-width: none;
  margin-inline: auto;
}

/* å¡ç‰‡æœ¬é«”ä¹Ÿé–æˆåŒå¯¬ï¼Œé¿å… 100% æ’åˆ°å®¹å™¨ */
.card{
  width: var(--content-w) !important;
}

/* 3) æ¡Œæ©Ÿæ®µè½ä»å¯åƒæ»¿ï¼ˆä½ åŸæœ¬å·²è¨­å®š --card-w/--card-hï¼›é€™è£¡åŒæ­¥ content å¯¬ï¼‰ */
@media (min-width: 1024px){
  :root{
    --content-w: var(--card-w); /* æ¡Œæ©Ÿå¡ç‰‡æ”¾å¤§æ™‚ï¼ŒæŒ‰éˆ•/æœå°‹è‡ªå‹•è·Ÿè‘—æ”¾å¤§ */
  }
}

/* 4) è¶…å°æ‰‹æ©Ÿä¹ŸåŒæ­¥ï¼ˆä¾ä½ åŸæœ¬çš„ --card-wï¼‰ */
@media (max-width: 360px){
  :root{
    --content-w: var(--card-w);
  }
}



/* ================================
   Vocab å¡ç‰‡ï¼šè‡ªé©æ‡‰å­—ç´š + ä½ç½®å›ºå®š
   â€”â€” åªè¦†è“‹å¿…è¦çš„é¸æ“‡å™¨ï¼Œå…¶é¤˜ä¸å‹• â€”â€”
================================ */

/* ä¸‰è¡Œå›ºå®šä½ç½®ï¼šè©æ€§(ä¸Š) â†’ è‹±æ–‡(ä¸­) â†’ ä¸­æ–‡(ä¸‹) */
.face .entry {
  display: grid;
  /* ä¾æ¯”ä¾‹å›ºå®šä¸‰è¡Œé«˜åº¦ï¼Œå¯ç…§å–œå¥½å¾®èª¿æ¯”ä¾‹ */
  grid-template-rows: 18% 52% 30%;
  align-content: stretch;
  justify-items: center;
  text-align: center;
  height: 100%;
  gap: 0;               /* ä½ç½®å›ºå®šï¼Œè¡Œé–“è·è¨­ 0ï¼›ç•™ç™½é å„è‡ª line-height */
  padding: 0 .75rem;    /* ä¸å½±éŸ¿æ—¢æœ‰å¤–è§€çš„å‰æä¸‹ï¼Œé¿å…å­—è²¼é‚Š */
}

/* æ˜ç¢ºé–å®šæ¯è¡Œæ‰€åœ¨çš„ grid ä½ç½® */
.pos-text { grid-row: 1; }
.en-text  { grid-row: 2; }
.zh-text  { grid-row: 3; }

/* â€”â€” å‹•æ…‹å­—ç´šï¼ˆè·Ÿè‘—è¢å¹•è®ŠåŒ–ï¼‰â€”â€”
   ä½¿ç”¨ clamp(æœ€å°, ç›¸å°æ–¼è¦–çª—çš„æ¯”ä¾‹, æœ€å¤§)
   vmin æœƒåŒæ™‚è€ƒé‡å¯¬èˆ‡é«˜ï¼Œè¼ƒç©©å¥ */
.pos-text {
  font-size: clamp(12px, 2.2vmin, 18px);   /* è©æ€§ï¼šæœ€å° */
  line-height: 1.1;
  font-weight: 600;
  opacity: .85;
}

.en-text {
  font-size: clamp(20px, 8vmin, 60px);     /* è‹±æ–‡ï¼šæœ€å¤§ */
  line-height: 1.15;
  font-weight: 800;
  word-break: break-word;                  /* è¶…é•·å­—ä¸æ“ ä½ */
  hyphens: auto;
}

.zh-text {
  font-size: clamp(16px, 4vmin, 32px);   /* ä¸­æ–‡ï¼šä¸­ç­‰ */
  line-height: 1.25;
  font-weight: 600;
  word-break: break-word;
}

/* â€”â€” é™åˆ¶è¡Œæ•¸ï¼Œé¿å…æŠŠç‰ˆä½æ’é–‹å°è‡´ä½ç½®ä½ç§» â€”â€” */
.pos-text,
.en-text,
.zh-text {
  /* åœ¨å„è‡ªæ ¼å­å…§ç½®ä¸­ */
  place-self: center;

  /* å¤šè¡Œæˆªæ–·ï¼ˆWebKitï¼‰ */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.pos-text { -webkit-line-clamp: 1; }  /* è©æ€§åªé¡¯ç¤ºä¸€è¡Œ */
.en-text  { -webkit-line-clamp: 2; }  /* è‹±æ–‡é è¨­å…©è¡Œå°é ‚ */
.zh-text  { -webkit-line-clamp: 2; }  /* ä¸­æ–‡é è¨­å…©è¡Œå°é ‚ */

/* â€”â€” è‹¥ä½ çš„ç¾æœ‰æ¨£å¼æŠŠ .face éš±è—ï¼é¡¯ç¤ºï¼Œé€™è£¡ä¸æ”¹ â€”â€” */
/* åƒ…ç¢ºä¿å…§å®¹å¡«æ»¿å®¹å™¨é«˜åº¦ï¼Œä»¥é…åˆä¸Šæ–¹ grid */
.face { min-height: 100%; }  /* ä¸å½±éŸ¿åŸæœ‰ card å°ºå¯¸è¨­å®š */
